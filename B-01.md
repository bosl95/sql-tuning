# 실습 환경 세팅

```shell
$ docker run -d -p 13306:3306 brainbackdoor/data-subway:0.0.2
```

<br>

# 요구사항

> Coding as a Hobby 와 같은 결과를 반환하세요.

```
Yes - 80.8%
No - 19.2%
```

<br>
<br>

# 쿼리 튜닝 과정

```sql
select
COUNT(case when programmer.hobby = 'yes' then 1 end) / COUNT(*) * 100 as YES,
COUNT(case when programmer.hobby = 'no' then 1 end) / COUNT(*) * 100 as NO
from programmer;

# 실행 결과
[2021-11-21 19:50:45] 1 row retrieved starting from 1 in 167 ms (execution: 158 ms, fetching: 9 ms)
```

### 실행 계획

| id | select\_type | table | partitions | type | possible\_keys | key | key\_len | ref | rows | filtered | Extra |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | SIMPLE | programmer | NULL | ALL | NULL | NULL | NULL | NULL | 71210 | 100 | NULL |

<br>

- 풀스캔을 돌기 때문에 hobby에 인덱스를 거는 것은 의미가 없을 것이라 생각했는데 그렇지 않았다. (아마 where 절 사용에 있어서 빠르게 처리되는 게 아닐까?🤔)

```sql
select
COUNT(case when programmer.hobby = 'yes' then 1 end) / COUNT(*) * 100 as YES,
COUNT(case when programmer.hobby = 'no' then 1 end) / COUNT(*) * 100 as NO
from programmer;
# 실행 결과
[2021-11-21 19:52:27] 1 row retrieved starting from 1 in 54 ms (execution: 42 ms, fetching: 12 ms)
```
